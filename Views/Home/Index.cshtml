@model List<Wydatek>

@{
    ViewData["Title"] = "Lista Wydatków";

    var sortOrder = Context.Request.Query["sortOrder"].ToString();

    string GetArrow(string column)
    {
        if (sortOrder == column) return "⬆️";
        if (sortOrder == column + "_Desc") return "⬇️";
        return "";
    }

    string NextSort(string column)
    {
        return sortOrder == column ? column + "_Desc" : column;
    }
}

<div class="container mt-5">
    <h2 class="text-center mb-4">💰 Lista Wydatków</h2>

    <table class="table table-dark table-striped table-hover rounded">
        <thead>
            <tr>
                <th>
                    <a href="?sortOrder=@NextSort("Id")" class="text-light text-decoration-none">
                        ID @GetArrow("Id")
                    </a>
                </th>
                <th>
                    <a href="?sortOrder=@NextSort("Opis")" class="text-light text-decoration-none">
                        Opis 🧾 @GetArrow("Opis")
                    </a>
                </th>
                <th>
                    <a href="?sortOrder=@NextSort("Data")" class="text-light text-decoration-none">
                        Data @GetArrow("Data")
                    </a>
                </th>
                <th>
                    <a href="?sortOrder=@NextSort("Kwota")" class="text-light text-decoration-none">
                        Kwota 💵 @GetArrow("Kwota")
                    </a>
                </th>
                <th>Akcje</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var wydatek in Model)
            {
                <tr>
                    <td>@wydatek.Id</td>
                    <td>@wydatek.Opis</td>
                    <td>@wydatek.Data.ToString("dd.MM.yyyy")</td>
                    <td>@wydatek.Kwota.ToString("C")</td>
                    <td>
                        <form asp-action="Edit" asp-controller="Home" method="post" style="display:inline">
                            <input type="hidden" name="id" value="@wydatek.Id" />
                            <button type="submit" class="btn btn-outline-light btn-sm me-1">✏️</button>
                            @Html.AntiForgeryToken()
                        </form>

                        <form asp-action="Delete" asp-controller="Home" method="post" style="display:inline">
                            <input type="hidden" name="id" value="@wydatek.Id" />
                            <button type="submit" class="btn btn-danger btn-sm">🗑️</button>
                            @Html.AntiForgeryToken()
                        </form>
                    </td>
                </tr>
            }

        </tbody>
    </table>
</div>
